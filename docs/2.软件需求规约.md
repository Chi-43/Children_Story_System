# 儿童故事AI生成平台 软件需求规约

## 1. 引言

### 1.1 目的

本软件旨在为12岁以下儿童及其家长、教育者提供一个基于AI的故事生成与心理情感分析平台。平台可根据儿童的兴趣、情绪和需求，自动生成个性化故事，并对用户的对话进行情感分析，辅助家长和老师了解儿童心理状态。

### 1.2 术语和缩略语

- AI：人工智能

- API：应用程序编程接口

- JWT：JSON Web Token，用户认证令牌

- RAG：检索增强生成（Retrieval-Augmented Generation）

### 1.3 参考资料

- 项目技术文档 

- 相关用例分析、数据建模文档

------

## 2. 总体描述

### 2.1 产品功能概述

- 用户注册、登录与认证

- AI故事生成（支持自定义主题、长度、风格等）

- 用户对话情感分析

- 故事素材库管理与加载

- 聊天与故事历史记录管理

- 多端适配的Web前端界面

### 2.2 用户特征

- 儿童用户（12岁以下）

- 家长、教育者

- 平台管理员

### 2.3 运行环境

- 后端：Python 3.8+，Flask，MySQL

- 前端：Vue3，Node.js 18+

- 部署环境：Windows/Linux服务器

### 2.4 设计与实现约束

- 遵守儿童网络安全与隐私保护法规

- 不输出不适宜儿童的内容

- 支持高并发访问

------

## 3. 功能需求

### 3.1 用户管理

- 用户可通过用户名和密码注册账号

- 用户登录后获得JWT认证token

- 支持用户信息的安全存储与管理

### 3.2 AI故事生成

- 用户输入主题、要求、长度等，平台自动生成故事

- 故事内容需健康、积极、适合儿童

- 支持根据用户历史情绪分析结果推荐故事

### 3.3 情感分析

- 对用户与AI的对话内容进行情感分析

- 输出整体情绪、每日情绪趋势、典型样本

- 支持多轮对话的情感追踪

### 3.4 故事素材库管理

- 支持上传、加载本地故事素材库

- 支持素材库的增删查改

### 3.5 聊天与故事历史

- 记录用户与AI的所有对话与生成的故事

- 支持历史记录的查询、删除

### 3.6 安全与权限

- 所有API需认证token访问（除注册、登录）

- 敏感操作需权限校验

- 防止SQL注入、XSS等安全风险

------

## 4. 非功能需求

### 4.1 性能需求

- 支持不少于100个并发用户

- 主要接口响应时间不超过5秒

### 4.2 可靠性

- 99% 以上的可用性

- 关键数据每日自动备份

### 4.3 可用性

- 前端界面简洁、易用，适合儿童操作

- 支持移动端和PC端访问

### 4.4 可维护性

- 代码结构清晰，注释规范

- 主要功能有自动化测试覆盖

### 4.5 可扩展性

- 支持后续接入更多AI模型或第三方API

- 支持多语言扩展

### 4.6 安全性

- 用户密码加密存储

- Token认证机制

- 日志记录异常与安全事件

------

## 5. 外部接口需求

### 5.1 用户接口

- Web前端（Vue3）：登录、注册、提问、故事生成、情感分析、历史查询等页面

### 5.2 API接口

- RESTful风格，主要接口包括：

- /api/register 用户注册

- /api/login 用户登录

- /api/ask AI问答

- /api/generate_story 故事生成

- /api/analyze_sentiment2 情感分析

- /api/load_stories 加载故事素材

- /api/story_history 故事历史

- /api/chat_history 聊天历史

### 5.3 数据库接口

- MySQL数据库，表结构包括用户表、对话表、故事表等

------

## 6. 其他需求

- 支持日志记录与异常追踪

- 支持定期数据库备份

- 支持配置文件与环境变量管理